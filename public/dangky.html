<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ƒêƒÉng k√Ω | Green Minimal</title>
  <link rel="stylesheet" href="dangky.css">
</head>
<body>
  <main class="wrap">
    <div class="brand">NAVER</div>

    <section class="card">
      <form id="signupForm" novalidate>
        <!-- ID -->
        <label class="input" aria-label="ID">
            <span>ü™™</span>
            <input id="userId" type="text" placeholder="ID" autocomplete="username" required />
            <span class="suffix-in" aria-hidden="true">@my-t.com</span>
            </label>
        <div class="error" id="err-id">Vui l√≤ng nh·∫≠p ID (t·ªëi thi·ªÉu 4 k√Ω t·ª± v√† kh√¥ng ch·ª©a kho·∫£ng tr·∫Øng).</div>

        <!-- Password -->
        <label class="input" aria-label="M·∫≠t kh·∫©u">
          <span>üîí</span>
          <input id="password" type="password" placeholder="Password" autocomplete="new-password" required />
          <span class="eye" id="togglePw" title="Hi·ªán/·∫©n m·∫≠t kh·∫©u">üëÅÔ∏è</span>
        </label>
        <div class="error" id="err-pw">M·∫≠t kh·∫©u t·ªëi thi·ªÉu 6 k√Ω t·ª±.</div>

        <!-- Optional email -->
        <label class="input" aria-label="Email ph·ª•">
          <span>‚úâÔ∏è</span>
          <input id="backupEmail" type="email" placeholder="[Optional] Email (for identification)" />
        </label>

        <!-- Name & DOB -->
        <label class="input" aria-label="H·ªç v√† t√™n">
          <span>üë§</span>
          <input id="fullName" type="text" placeholder="Name" required />
        </label>
        <div class="error" id="err-name">Vui l√≤ng nh·∫≠p h·ªç v√† t√™n.</div>

        <label class="input" aria-label="Ng√†y sinh">
          <span>üìÖ</span>
          <input id="dob" type="date" placeholder="YYYY-MM-DD" required />
        </label>
        <div class="error" id="err-dob">Ng√†y sinh kh√¥ng h·ª£p l·ªá.</div>

        <!-- Gender segmented -->
        <div class="group">
          <div class="segmented" role="tablist" aria-label="Gi·ªõi t√≠nh">
            <button type="button" data-gender="male" class="active" role="tab" aria-selected="true">Male</button>
            <button type="button" data-gender="female" role="tab" aria-selected="false">Female</button>
            <button type="button" data-gender="other" role="tab" aria-selected="false">Other</button>
          </div>
          <div class="muted">B·∫°n kh√¥ng th·ªÉ x√°c minh b·∫±ng t√™n th·∫≠t n·∫øu t√™n, ng√†y sinh v√† gi·ªõi t√≠nh kh√¥ng kh·ªõp v·ªõi gi·∫•y t·ªù tu·ª≥ th√¢n.</div>
        </div>

        <!-- Phone -->
        <div class="phone">
          <label class="select" aria-label="M√£ qu·ªëc gia">
            <span>üåê</span>
            <select id="country">
              <option value="+82" selected>Korea (Rep. of)  +82</option>
              <option value="+84">Viet Nam  +84</option>
              <option value="+1">United States  +1</option>
              <option value="+81">Japan  +81</option>
              <option value="+65">Singapore  +65</option>
            </select>
          </label>
          <label class="input" aria-label="S·ªë ƒëi·ªán tho·∫°i">
            <span id="dial">+82</span>
            <input id="phone" type="tel" placeholder="Enter Phone Number" required />
          </label>
        </div>
        <div class="error" id="err-phone">S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá.</div>

        <!-- Submit -->
        <button class="btn" id="sendCode" type="submit">Sign in</button>
        <div class="hint" id="result" aria-live="polite"></div>
      </form>
    </section>
  </main>

  <script>
    // Toggle password visibility
    document.getElementById('togglePw').addEventListener('click', () => {
      const pw = document.getElementById('password');
      pw.type = pw.type === 'password' ? 'text' : 'password';
    });

    // Gender segmented control
    const genderGroup = document.querySelectorAll('.segmented button');
    let gender = 'male';
    genderGroup.forEach(btn => btn.addEventListener('click', () => {
      genderGroup.forEach(b => { b.classList.remove('active'); b.setAttribute('aria-selected','false'); });
      btn.classList.add('active');
      btn.setAttribute('aria-selected','true');
      gender = btn.dataset.gender;
    }));

    // Country code reflect to dial prefix
    const country = document.getElementById('country');
    const dial = document.getElementById('dial');
    country.addEventListener('change', () => dial.textContent = country.value);

    // Simple validators
    const idOk = v => /^(?=.{4,})[^\s]+$/.test(v);
    const pwOk = v => v.length >= 6;
    const phoneOk = v => /^[0-9\-\s]{6,15}$/.test(v);

    const show = (id, cond) => { const el = document.getElementById(id); el.style.display = cond ? 'none':'block'; };

    // Submit handler (demo)
    document.getElementById('signupForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const id = document.getElementById('userId').value.trim();
      const pw = document.getElementById('password').value;
      const name = document.getElementById('fullName').value.trim();
      const dob = document.getElementById('dob').value;
      const phone = document.getElementById('phone').value.trim();

      const v1 = idOk(id); show('err-id', v1);
      const v2 = pwOk(pw); show('err-pw', v2);
      const v3 = name.length>0; show('err-name', v3);
      const v4 = Boolean(dob); show('err-dob', v4);
      const v5 = phoneOk(phone); show('err-phone', v5);

      if(v1 && v2 && v3 && v4 && v5){
        const payload = {
          id: id + '@my-t.com',
          name, dob, gender,
          phone: country.value + ' ' + phone,
          backupEmail: document.getElementById('backupEmail').value.trim() || null
        };
        // document.getElementById('result').textContent = '‚úÖ D·ªØ li·ªáu h·ª£p l·ªá. (Demo) G·ª≠i m√£ ƒë·∫øn: ' + payload.phone;
        window.location.href = 'dangnhap.html';
        // TODO: G·ªçi API backend t·∫°i ƒë√¢y ƒë·ªÉ g·ª≠i OTP / t·∫°o t√†i kho·∫£n
        // fetch('/api/signup', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)})
      } else {
        document.getElementById('result').textContent = '';
      }
    });
  </script>
</body>
</html>
